---
sys:
  pageId: "2a81f336-f350-80b4-be1d-f5b1ad97e25f"
  createdTime: "2025-11-11T09:48:00.000Z"
  lastEditedTime: "2025-11-18T08:21:00.000Z"
  propFilepath: "posts/docker-basic/index.md"
title: "Docker Basic"
date: "2025-11-18T00:00:00Z"
description: ""
tags:
  - "ğŸ·ï¸Docker"
  - "ğŸ·ï¸DevOps"
categories:
  - "ğŸ“± æŠ€è¡“"
author: "Harry Yang"
draft: false
url: "posts/docker-basic"
section: "posts"
---

åœ¨è¿‘å¹´çš„è»Ÿé«”é–‹ç™¼ä¸­ï¼ŒDevOps å¯¦è¸å·²æˆç‚ºä¸»æµï¼Œå…¶æ ¸å¿ƒç†å¿µæ˜¯é€éè‡ªå‹•åŒ–å’ŒæŒçºŒæ€§ä¾†ç¸®çŸ­è»Ÿé«”é–‹ç™¼é€±æœŸï¼Œè€Œ CI/CD æµç¨‹æ­£æ˜¯å¯¦ç¾é€™ä¸€ç›®æ¨™çš„é—œéµã€‚åœ¨ CI/CD çš„ç™¼å±•ä¸­ï¼Œå®¹å™¨åŒ–æŠ€è¡“æ‰®æ¼”äº†é‡è¦çš„åŸºçŸ³è§’è‰²ï¼Œå› ç‚ºå®ƒè§£æ±ºäº†è»Ÿé«”é–‹ç™¼ä¸­é•·æœŸé‡åˆ°çš„ç’°å¢ƒä¸ä¸€è‡´å•é¡Œï¼Œæä¾›äº†ä¸€å€‹æ¨™æº–åŒ–çš„å°è£æ–¹å¼ã€‚


# What is Docker


Docker æ˜¯ä¸€å€‹ç”¨ä¾†å¯¦ç¾æ‡‰ç”¨ç¨‹å¼å®¹å™¨åŒ–(Containerization)çš„å·¥å…·ï¼Œå¹«åŠ©é–‹ç™¼äººå“¡åœ¨ä¸åŒçš„ä½œæ¥­ç³»çµ±ä¸Šé”åˆ°å¿«é€Ÿä¸”ä¸€è‡´çš„æ‡‰ç”¨éƒ¨ç½²ã€‚åœ¨è»Ÿé«”é–‹ç™¼æœå‹™ä¸Šï¼Œè¦ç¢ºä¿æ‡‰ç”¨ç¨‹å¼åœ¨ä¸åŒç’°å¢ƒä¸‹ç©©å®šä¸”ä¸€è‡´çš„é‹ä½œï¼Œæ˜¯ä¸€é …å¸¸è¦‹çš„é›£é¡Œã€‚è€Œé€éå®¹å™¨åŒ–ï¼Œèƒ½å¤ ç›´æ¥è§£æ±ºé€™å€‹å•é¡Œã€‚å®¹å™¨åŒ–æ˜¯å°‡æ‡‰ç”¨ç¨‹å¼çš„ä¾è³´é …ç›®(ç¨‹å¼åº«ã€è¨­å®šæª”ç­‰)å°è£æˆä¸€å€‹ç¨ç«‹ä¸”å¯åŸ·è¡Œçš„å–®å…ƒâ€”å®¹å™¨ã€‚é€™ç¨®åšæ³•æä¾›ç¨ç«‹æ€§ã€ä¸€è‡´æ€§å’Œå¯æ”œæ€§çš„ç‰¹æ€§ï¼Œç¢ºä¿åœ¨é–‹ç™¼éšæ®µå¯è¡Œçš„æ‡‰ç”¨ç¨‹å¼å…§å®¹ï¼Œåœ¨æ­£å¼ç’°å¢ƒä¸­ä¹Ÿèƒ½æ­£å¸¸é‹ä½œã€‚


ä¸€è‡´æ€§:å®¹å™¨æœƒå°‡æ‡‰ç”¨ç¨‹å¼çš„ä¾è³´é …ç›®å°è£åœ¨ä¸€èµ·ï¼Œå› æ­¤èƒ½å»ºç«‹ä¸€è‡´çš„ç¨ç«‹é‹ä½œç©ºé–“ï¼Œè§£æ±ºåœ¨ä¸åŒä½œæ¥­ç’°å¢ƒä¸‹çš„å„ç¨®å¯èƒ½è¡çªã€‚


ç¨ç«‹æ€§:æ¯å€‹å®¹å™¨æœƒåœ¨ç¨ç«‹çš„ç©ºé–“ä¸­é‹ä½œï¼Œé€™ç¨®éš”é›¢æ©Ÿåˆ¶ç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„ç¨‹å¼åº«å’Œä¾è³´é …ç›®ï¼Œä¸æœƒèˆ‡åœ¨åŒä¸€ä¸»æ©Ÿä¸ŠåŸ·è¡Œçš„å…¶ä»–å®¹å™¨ç™¼ç”Ÿè¡çªã€‚


å¯æ”œæ€§:æ“æœ‰è¼•é‡åŒ–ä»¥åŠå¯ä»¥é«˜é€Ÿéƒ¨ç½²çš„ç‰¹æ€§ï¼Œèƒ½åœ¨ä¸åŒç¡¬é«”ã€ä½œæ¥­ç³»çµ±ã€é›²ç«¯æœå‹™ä¹‹é–“è¼•é¬†é·ç§»å’Œé‹ä½œã€‚


# VM vs Docker


å®¹å™¨åŒ–æŠ€è¡“æ˜¯è™›æ“¬åŒ–çš„ä¸€ç¨®å½¢å¼ï¼Œä½†å»æ¯”è™›æ“¬æ©Ÿ(virtual machineï¼ŒVM)æ›´è¼•å·§ä¸”æ›´æœ‰æ•ˆç‡ã€‚è¦ç†è§£ç‚ºä»€éº¼å®¹å™¨åŒ–æœƒæ›´æœ‰å„ªå‹¢ï¼Œå°±è¦æåˆ°é›»è…¦çš„åŸºæœ¬æ¶æ§‹ã€‚é€™è£¡ç¨å¾®å°‡é›»è…¦åŸºæœ¬æ¶æ§‹ç°¡åŒ–ç‚ºä¸‰å€‹å±¤é¢ï¼Œå¾åº•å±¤ç¡¬é«”ä¸€è·¯å¾€ä¸Šåˆ°æ‡‰ç”¨ç¨‹å¼æœ¬èº«ã€‚

- ç¡¬é«”å±¤ï¼šé€™æ˜¯é›»è…¦çš„å¯¦é«”å±¤ï¼Œç”±å¯¦é«”ä¼ºæœå™¨æˆ–è™›æ“¬æ©Ÿå™¨çµ„æˆï¼Œæä¾› CPUã€è¨˜æ†¶é«”ã€å„²å­˜ç©ºé–“å’Œç¶²è·¯è³‡æºã€‚
- ä¸»æ©Ÿä½œæ¥­ç³»çµ±ï¼šä¸»æ©Ÿä½œæ¥­ç³»çµ± (ä¾‹å¦‚ Linux) ä½æ–¼ç¡¬é«”å±¤ä¹‹ä¸Šï¼Œè² è²¬ç®¡ç†ç³»çµ±è³‡æºä¸¦å……ç•¶æ‡‰ç”¨ç¨‹å¼èˆ‡ç¡¬é«”ä¹‹é–“çš„æ©‹æ¨‘ã€‚
- æ‡‰ç”¨ç¨‹å¼å±¤ï¼šä½œæ¥­ç³»çµ±ä¹‹ä¸Šçš„æ‡‰ç”¨è»Ÿé«”ï¼Œç‚ºä½¿ç”¨è€…æä¾›æœå‹™çš„è»Ÿé«”æˆ–æ‡‰ç”¨ç¨‹å¼ã€‚

è€Œ Docker åœ¨æ¶æ§‹ä¸­ä½œç‚ºä»‹æ–¼ä½œæ¥­ç³»çµ±å’Œæ‡‰ç”¨ç¨‹å¼å±¤ä¹‹é–“çš„å®¹å™¨å¼•æ“[^1]å¯¦ç¾å®¹å™¨åŒ–ï¼Œèˆ‡è™›æ“¬æ©Ÿå·®ç•°çš„ä¸»è¦å·®ç•°åœ¨æ–¼

- Docker åƒ…å°‡æ‡‰ç”¨ç¨‹å¼å±¤è™›æ“¬åŒ–è®Šæˆ[å®¹å™¨](https://cloud.google.com/learn/what-are-containers)ï¼Œæ‰€ä»¥å®¹å™¨å…§æ²’æœ‰å°ˆå±¬çš„ä½œæ¥­ç³»çµ±ã€‚è€Œä¸”åœ¨ä¸€å°å®¿ä¸»æ©Ÿä¸Šå¯ä»¥å•Ÿå‹•å¤šå€‹å®¹å™¨ï¼Œæ‰€æœ‰å®¹å™¨å°‡æœƒå…±ç”¨å®¿ä¸»çš„ä½œæ¥­ç³»çµ±æ ¸å¿ƒã€‚
- è™›æ“¬æ©Ÿå‰‡å®Œæ•´è™›æ“¬åŒ–ä¸€å€‹ç¨ç«‹çš„ä½œæ¥­ç³»çµ±ä»¥åŠæ‡‰ç”¨ç¨‹å¼å±¤ã€‚

å› ç‚ºè™›æ“¬åŒ–éç¨‹å®¹å™¨åŒ–æŠ€è¡“ç¼ºå°‘äº†ä½œæ¥­ç³»çµ±ï¼Œæ‰€ä»¥ Docker åœ¨éƒ¨ç½²æ‡‰ç”¨ç¨‹å¼æ™‚éœ€è¦çš„è¨˜æ†¶é«”æ›´å°‘ï¼Œé€Ÿåº¦æ›´é«˜æ•ˆï¼Œèƒ½é€²ä¸€æ­¥å„ªåŒ–è³‡æºä½¿ç”¨ï¼ŒåŒæ™‚èƒ½é”åˆ°å¿«é€Ÿæ“´å¼µ(scaling)çš„èƒ½åŠ›ã€‚

{{< figure src="https://www.docker.com/app/uploads/2021/11/docker-containerized-and-vm-transparent-bg.png" class="mx-auto" caption="Containerized compared to VM" >}}


# Docker Basic


äº†è§£å®¹å™¨åŒ–æŠ€è¡“å’Œ Docker çš„å„ªå‹¢ï¼Œæ¥è‘—è¦ä¾†ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Docker ä¾†å»ºé€ æ‡‰ç”¨ç¨‹å¼å®¹å™¨ã€‚ä½†åœ¨é€²å…¥æ›´è©³ç´°çš„æ“ä½œèªªæ˜å‰ï¼Œéœ€è¦ä»‹ç´¹ 4 å€‹æ¶µè“‹åœ¨å®¹å™¨çš„ç”Ÿå‘½é€±æœŸä¸­çš„å°ˆæœ‰åè©ï¼š

- **æ˜ åƒæª” (Image)**ï¼š
	- æ˜ åƒæª”æ˜¯å»ºç«‹å®¹å™¨çš„å”¯è®€æª”æ¡ˆï¼Œå®šç¾©å’Œæè¿°å®¹å™¨å°‡å¦‚ä½•å»ºç½®ï¼Œé€šå¸¸å­˜æ”¾åœ¨ Registry ä¸­ã€‚
	- å¯ä»¥ç‚ºæ˜ åƒæª”å»ºç«‹æ¨™ç±¤ï¼Œé€²è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œè¿½è¹¤é–‹ç™¼è®Šæ›´ï¼Œç¢ºä¿æ‡‰ç”¨ç¨‹å¼çš„ç©©å®šæ€§ã€‚
- **å®¹å™¨ (Container)**ï¼š
	- å®¹å™¨æ˜¯ä¸€ç¨®è¼•é‡ç´šçš„è™›æ“¬åŒ–æŠ€è¡“ï¼Œæ˜¯æ‡‰ç”¨ç¨‹å¼çš„æ¨™æº–åŸ·è¡Œå–®å…ƒã€‚
	- æ¯å€‹å®¹å™¨éƒ½æ˜¯å¾æ˜ åƒæª”å‰µå»ºçš„ï¼ŒåŒ…å«äº†æ‡‰ç”¨ç¨‹å¼é‹ä½œæ‰€éœ€çš„ä¸€åˆ‡å…ƒä»¶ã€‚
	- æä¾›æ‡‰ç”¨ç¨‹å¼éš”é›¢ç’°å¢ƒï¼Œè®“å¤šå€‹æ‡‰ç”¨ç¨‹å¼åœ¨åŒä¸€å°ä¸»æ©Ÿä¸Šç¨ç«‹é‹ä½œè€Œä¸äº’ç›¸å¹²æ“¾ã€‚
	- å®¹å™¨èƒ½è¼•é¬†å•Ÿå‹•ã€åœæ­¢ã€åˆªé™¤ï¼Œä½†åˆªé™¤å®¹å™¨æ™‚æ‰€æœ‰åœ¨å®¹å™¨å…§çš„æ“ä½œå°‡ä¸æœƒè¢«ä¿ç•™ã€‚
- **Registry**ï¼š
	- é€™æ˜¯å­˜æ”¾æ˜ åƒæª”çš„é ç«¯ç©ºé–“ï¼Œåƒæ˜¯ Docker Hubã€RedHatã€Amazon ECRã€Google Container Registryç­‰ã€‚
	- åœ¨å…¬å…±çš„æ˜ åƒæª”å€‰åº«ï¼Œç”¨æˆ¶å¯ä»¥ç™¼ä½ˆå’Œä¸‹è¼‰æ˜ åƒï¼Œä¸¦æä¾›äº†å¤§é‡ç¾æˆçš„æ‡‰ç”¨ç¨‹å¼æ˜ åƒæª”ï¼Œæ–¹ä¾¿é–‹ç™¼è€…å¿«é€Ÿé–‹å§‹ä½¿ç”¨ã€‚
- **Dockerfile**ï¼š
	- Dockerfile æ˜¯ç”¨ä¾†å®šç¾©æ˜ åƒæª”å»ºæ§‹éç¨‹çš„æ–‡ä»¶ï¼Œé€éä¸€ç³»åˆ—æŒ‡ä»¤ï¼Œå‘Šè¨´ Docker å¦‚ä½•æ§‹å»ºæ˜ åƒæª”ã€‚

é€šå¸¸ä¸€å€‹å®¹å™¨çš„ç”Ÿå‘½é€±æœŸæ˜¯å¾å–å¾—æ˜ åƒæª”é–‹å§‹ï¼ŒDocker æ¥è‘—ä¾ç…§æ˜ åƒæª”å•Ÿå‹•å®¹å™¨ã€‚ä¹‹å¾Œæ‡‰ç”¨ç¨‹å¼æœƒåœ¨å®¹å™¨å…§é–‹å§‹é‹ä½œï¼Œç›´åˆ°å‡ºç¾ä¸‹ä¸€å€‹ç‰ˆæœ¬çš„æ˜ åƒæª”ï¼ŒèˆŠçš„å®¹å™¨æœƒè¢«é—œé–‰ã€åˆªé™¤ï¼Œæ¥è‘—å•Ÿå‹•æ–°ä¸€è¼ªçš„ç”Ÿå‘½é€±æœŸã€‚


# Starting a Container Lifecycle


ç¶“éä¸Šé¢ç¨®ç¨®çš„ä»‹ç´¹ï¼Œå¯ä»¥å¾—çŸ¥ä¸€å€‹å®¹å™¨çš„åŸºç¤æ˜¯æ˜ åƒæª”ã€‚å–å¾—æ˜ åƒæª”æœ‰å…©ç¨®æ–¹å¼ï¼Œä¸€ç¨®æ˜¯å¾ registry æ‹‰å–ï¼Œå¦ä¸€ç¨®æ˜¯é€åŸºæ–¼ Dockerfile æ§‹å»ºã€‚è‹¥æ²’æœ‰å–å¾—æ˜ åƒæª”å°±ç›´æ¥å•Ÿå‹•å®¹å™¨ï¼Œé‚£éº¼ Docker å°‡æœƒè©¦è‘—å¾ DockerHub æ‹‰å–ç›¸åŒåç¨±çš„ imageã€‚å¦‚æœæ²’æœ‰åœ¨ DockerHub ä¸Šæ²’æœ‰æª”æ¡ˆå°‡æœƒå¤±æ•—ï¼Œå› æ­¤å»ºè­°åœ¨å•Ÿå‹•å‰æœ€å¥½è¦ç¢ºä¿åœ°ç«¯æœ‰è©²æª”æ¡ˆã€‚


## Build or Get an image


å¦‚æœè¦å¾ registry æ‹‰å–æ˜ åƒæª”ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹çš„æŒ‡ä»¤ï¼Œä¸¦é€éæŒ‡å®š version ä¾†æŒ‡å®šç‰¹å®šç‰ˆæœ¬ã€‚Docker é è¨­å¾ DockerHub æ‹‰å–ï¼Œå¦‚æœè¦å¾å…¶ä»–å€‰åº«æ‹‰å–ï¼Œéœ€è¦è™•ç†æˆæ¬Šå•é¡Œï¼Œå†æŒ‡å®šæ˜ åƒæª”çš„å­˜æ”¾è·¯å¾‘ã€‚ä¾‹å¦‚å¾ AWS çš„ç§äºº Elastic Container Registry (ECR) æ‹‰å–ï¼Œå…¶æˆæ¬Šçš„ token é™å®š 12 å°æ™‚çš„æœ‰æ•ˆæœŸé™[^2]ã€‚


```shell
# default pull from DockerHub
docker pull image_name:version
# pull from public AWS public registry
docker pull public.ecr.aws/registry_alias/repository:tag
```


ç¬¬äºŒç¨®æ–¹å¼æ˜¯æ ¹æ“šæŒ‡å®šè·¯å¾‘çš„ Dockerfile ç›´æ¥å»ºç½®æ˜ åƒæª”ï¼Œå»ºç½®å®Œæˆå¾Œå°‡å„²å­˜åœ¨æœ¬æ©Ÿçš„å¿«å–å„²å­˜ä¸­ã€‚é€™è£¡éœ€è¦æ³¨æ„è¦ä½¿ç”¨ `docker buildx build` ä¾†åŸ·è¡Œï¼Œå› ç‚º `docker build` çš„ç‰ˆæœ¬å·²ç¶“è¢«å–ä»£äº†ã€‚åŒæ¨£åœ¨å»ºç½®éç¨‹ä¹Ÿæœ‰è¨±å¤šæ¨™ç±¤ï¼Œèƒ½å¤ ç”¨ä¾†è¨­å®šå»ºç½®éç¨‹è·Ÿçµæœï¼Œæœ‰é—œæ›´å¤šæ¨™ç±¤çš„ä½¿ç”¨æ–¹æ³•å¯ä»¥åƒç…§å®˜ç¶²çš„èªªæ˜ã€‚


```docker
docker buildx build -f <filepath> . -t <image_name>:<image_tag>
```


**Tags**


`-f` orÂ `--file` ç”¨ä¾†æŒ‡è¨‚å®šç‰¹å®šè·¯å¾‘ä¸­çš„ Dockerfileï¼Œå¦‚æœæ²’æœ‰æŒ‡å®šå‰‡æœƒå°‹æ‰¾å·¥ä½œç›®éŒ„ä¸‹ Dockerfileã€‚å¦å¤–è‹¥ä½¿ç”¨ç›¸å°è·¯å¾‘ï¼ŒDocker æœƒæ ¹æ“šä¸Šä¸‹æ–‡ç›®éŒ„ä¾†æœå°‹ã€‚


`.` æ˜¯å»ºæ§‹æ™‚å€™æä¾›çš„ contextï¼Œ**å°‡ç•¶å‰ç›®éŒ„åŠå…¶æ‰€æœ‰å…§å®¹**ä½œç‚ºå»ºæ§‹éç¨‹çš„ã€Œä¾†æºè³‡æ–™åº«ã€ï¼Œéå¸¸é‡è¦åˆ‡è¨˜ä¸èƒ½å¿½ç•¥ã€‚(å› ç‚ºä¸Šä¸‹æ–‡ç›®éŒ„è€Œç”¢ç”Ÿçš„å•é¡Œ:[https://shiun.me/blog/a-project-with-multiple-dockerfiles-an-introduction-to-build-context/](https://shiun.me/blog/a-project-with-multiple-dockerfiles-an-introduction-to-build-context/))


`-t` or `--tag` ç”¨ä¾†å‘½åå»ºç½®çš„æ˜ åƒæª”ä»¥åŠå°æ‡‰æ¨™ç±¤

{{< alert "lightbulb" >}}
[For more about build image](https://docs.docker.com/reference/cli/docker/image/build/)
{{< /alert >}}


## Image Management


å–å¾—æ˜ åƒæª”å¾Œï¼Œå¯ä»¥é€éæŒ‡ä»¤ä¾†æª¢æŸ¥å®‰è£çš„æ˜ åƒæª”ã€‚é™¤äº†ç¢ºèªæ˜¯å¦ä¸‹è¼‰æ­£ç¢ºå¤–ï¼Œåœ¨ç³»çµ±ä¸­é•·æœŸç©ç´¯çš„ä½¿ç”¨ä¸‹æœƒä½”ç”¨å¤§é‡è¨˜æ†¶é«”ç©ºé–“ï¼Œæ‰€ä»¥éœ€è¦é©æ™‚çš„ç®¡ç†å’Œæ¸…é™¤å·²ç¶“éæ™‚æˆ–æ²’åœ¨ä½¿ç”¨çš„æ˜ åƒæª”ã€‚


```shell
# list top level images
docker images
# remove image with ID
docker rmi IMAGEID
# or if an image has one or more tags referencing it
# you must remove all of them before the image is removed.
docker rmi REPOSITORY:TAG
# use -f --force will untags and removes all images that match the specified ID.
docker rmi -f IMAGEID
# check memory usage
docker system df
# remove all images that are not used for any container
docker image prune
```

{{< alert "lightbulb" >}}
[For more about image management](https://docs.docker.com/reference/cli/docker/image/)
{{< /alert >}}


## Create a container


å®¹å™¨æ˜¯é€éåŸ·è¡Œæ˜ åƒæª”è€Œå¾—åˆ°çš„å¯¦ä¾‹ï¼ŒåŒæ¨£èƒ½è¨­å®šæ¨™ç±¤ä¾†æ¨™è¨˜ç®¡ç†å®¹å™¨ã€‚å¦‚ä½¿ç”¨ name tag å¯ä»¥ç‚ºå®¹å™¨å‘½åæ–¹ä¾¿ç®¡ç†ï¼Œä½¿ç”¨ detach tag å¯ä»¥è®“å®¹å™¨åœ¨èƒŒæ™¯é‹ä½œï¼Œä½¿ç”¨ rm tag å¯ä»¥åœ¨é›¢é–‹å®¹å™¨å¾Œè‡ªå‹•åˆªé™¤æ‰€æœ‰å®¹å™¨å…§å®¹ã€‚


```docker
docker run --name test -it ubuntu bash
```


**Tags**


`--name` ç”¨ä¾†å‘½åå®¹å™¨


`-i`Â interactive andÂ `-t`Â terminal flags åœ¨å•Ÿå‹•å®¹å™¨å¾Œï¼Œé€²å…¥å®¹å™¨å…§éƒ¨ä¸¦ä½¿ç”¨çµ‚ç«¯æ©Ÿèˆ‡å®¹å™¨äº’å‹•


**More common used tags**


`-d` or `--detach` æŒ‡å®šå®¹å™¨åœ¨èƒŒæ™¯åŸ·è¡Œ


`--rm` automatically removes container when you exit.


`-p local port:container port` or `--publish` å°‡ä¸»æ©Ÿé€£æ¥åŸ å°æ‡‰åˆ°å®¹å™¨å°æ‡‰çš„é€£æ¥åŸ 


`-v` or `--volume` æ›è¼‰ç£ç¢Ÿå€è®“ä¸»æ©Ÿèˆ‡å®¹å™¨å…±ç”¨æª”æ¡ˆåŠè³‡æ–™å¤¾ï¼Œé¿å…éºå¤±åœ¨å®¹å™¨å…§ç”¢ç”Ÿçš„æ”¹è®Š


`--network` å°‡å®¹å™¨é€£æ¥åˆ°ç‰¹å®šçš„ Docker ç¶²çµ¡ï¼Œå¾è€Œå…è¨±åŒä¸€ç¶²è·¯ä¸Šçš„å®¹å™¨ä¹‹é–“é€²è¡Œé€šè¨Šã€‚


`--entrypoint` æŒ‡å®šè¦ä½œç‚ºè©²å®¹å™¨å…¥å£é»é‹è¡Œçš„ä¸åŒå‘½ä»¤ï¼Œé€šå¸¸ä½¿ç”¨ .sh æª”æ¡ˆã€‚

{{< alert "lightbulb" >}}
[For more about run containers](https://docs.docker.com/reference/cli/docker/container/run/#examples)
{{< /alert >}}

## Stop or Remove Containers


å•Ÿå‹•å®¹å™¨å¾Œï¼Œç‚ºäº†ç¢ºä¿æœ‰æ­£å¸¸é‹ä½œï¼Œå¯ä»¥é€é`docker ps` æŸ¥çœ‹åŸ·è¡Œä¸­çš„å®¹å™¨ã€‚åŒæ™‚å¦‚æœéœ€è¦æ“ä½œæ‡‰ç”¨ç¨‹å¼ï¼Œèƒ½å¤ é€é**`docker exec`**åœ¨å®¹å™¨ä¸­åŸ·è¡Œå‘½ä»¤ã€‚ä»¥ä¸‹åˆ—å‡ºä¸€äº›å¸¸ç”¨çš„å®¹å™¨åŸ·è¡ŒæŒ‡ä»¤


```shell
# list out running containers (default) -all means list all including stopped
docker ps -all
# stop container with ID or name
docker stop CONTAINERID
# remove container
docker rm --force <CONTAINERID>
# excute command in a running container
docker exec bash
# get logs from containers
# -f --follow will continue streaming the new output
# -t shows timestamp with each log
# --since shows logs generated after a given date
docker logs -f -t --since 2h <CONTAINERID>
```

{{< alert "lightbulb" >}}
[For more about interact with container](https://docs.docker.com/reference/cli/docker/container/)
{{< /alert >}}


# ç¸½çµ


åœ¨é€™ç¯‡æ–‡ç« æˆ‘å€‘èªè­˜åˆ°å®¹å™¨åŒ–å› ç‚ºåƒ…æœ‰è™›æ“¬åŒ–æ‡‰ç”¨ç¨‹å¼å±¤ã€æä¾›æ¨™æº–åŒ–çš„å°è£æµç¨‹ï¼Œä¸ä½†è§£æ±ºç’°å¢ƒä¸ä¸€è‡´è€Œé€ æˆçš„å•é¡Œï¼Œæ›´ç‚ºç¾åœ¨åŒ– CI/CD æµç¨‹æä¾›å¿«é€Ÿéƒ¨ç½²åŠæ“´å¼µçš„æ•ˆç‡å„ªå‹¢ã€‚æ¥è‘—ä»‹ç´¹å¦‚ä½•ä½¿ç”¨ Docker ä¾†å»ºé€ æ‡‰ç”¨ç¨‹å¼å®¹å™¨ï¼Œä¸¦èªªæ˜ 4 å€‹å°ˆæœ‰åè©åœ¨æ•´å€‹å®¹å™¨çš„ç”Ÿå‘½é€±æœŸçš„åœ°ä½åŠä½œç”¨ã€‚åœ¨ä¸‹ä¸€å€‹ç¯‡ç« å°‡æœƒæ·±å…¥æ¢è¨å¦‚ä½•æ’°å¯«ä¸€å€‹ Dockerfileï¼Œä¸¦é€²ä¸€æ­¥äº†è§£åœ¨ CI/CD æµç¨‹ä¸­ Docker æ‰®æ¼”çš„è§’è‰²ã€‚


åƒè€ƒè³‡æ–™


[https://www.youtube.com/watch?v=pg19Z8LL06w&feature=youtu.be](https://www.youtube.com/watch?v=pg19Z8LL06w&feature=youtu.be)


[https://www.docker.com/resources/what-container/](https://www.docker.com/resources/what-container/)


[https://docs.docker.com/get-started/docker-overview/](https://docs.docker.com/get-started/docker-overview/)


[https://www.startdataengineering.com/post/docker-for-de/#21-define-the-os-and-its-configurations-with-an-image](https://www.startdataengineering.com/post/docker-for-de/#21-define-the-os-and-its-configurations-with-an-image)



[^1]: å®¹å™¨å¼•æ“æŒ‡çš„æ˜¯å•Ÿç”¨å®¹å™¨åŒ–çš„è»Ÿé«”ï¼Œå¦‚ Dockerã€Kubernetesã€Podmanã€[Google Kubernetes Engine](https://cloud.google.com/kubernetes-engine) (GKE)ã€‚å¼•æ“æœƒæŒ‰ç…§æŒ‡ç¤ºå»ºç«‹ã€åŸ·è¡ŒåŠç®¡ç†å®¹å™¨ã€‚

[^2]: [https://docs.aws.amazon.com/AmazonECR/latest/userguide/docker-pull-ecr-image.html](https://docs.aws.amazon.com/AmazonECR/latest/userguide/docker-pull-ecr-image.html)
